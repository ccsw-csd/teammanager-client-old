<div class="container">
  <div>
    <h1 class="title">Forecast Detail</h1>
  </div>

  <div>
    <form [formGroup]="form" class="filters">
      <button secondary (click)="exportForecast()">Exportar</button>
      <div style='flex:1'></div>
      <!-- SELECTOR MONTH-->
      <mat-form-field class="filter-input">
        <mat-label>Selecciona Mes/Fecha</mat-label>
        <mat-select [(ngModel)]="selectedMonth" [ngModelOptions]="{standalone: true}" (selectionChange)="getAbsences()">
          <mat-option
          *ngFor="let option of months"
            [value]="option.num">
            {{ option.name }}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <!-- Begin datte -->
      <mat-form-field class="filter-input-range">
        <mat-date-range-input [rangePicker]="picker" [formGroup]="form">
            <input matStartDate placeholder="Start date" formControlName="start">
            <input matEndDate placeholder="End date" formControlName="end">
        </mat-date-range-input> 
        <mat-date-range-picker #picker></mat-date-range-picker>
      </mat-form-field>
      <button primary (click)="picker.open()">Crear Rango</button>
      <!-- End date -->
    </form>
  </div>

  <div class="tableList">
    <table mat-table *ngIf="dataSource" [dataSource]="dataSource" matSort>      
        <ng-container *ngFor="let column of columns" [matColumnDef]="column" [sticky]="isSticky(transcode[column])">
          <th mat-header-cell *matHeaderCellDef [ngClass]="this.getHeaderClass(transcode[column])">{{ transcode[column] }}</th>
          <td mat-cell *matCellDef="let object" [ngClass]="object[column].class">{{ object[column].value }}</td>
        </ng-container>

        <ng-container *ngFor="let month of monthsHeaderExtraInfo" [matColumnDef]="month.name"  [sticky]="isSticky(month.name)">
          <th mat-header-cell *matHeaderCellDef [attr.colspan]="month.num" class="upperHeader">
            {{ month.name }}
          </th>
        </ng-container>
      
        <tr mat-header-row *matHeaderRowDef="monthsHeader; sticky: true"></tr>
        <tr mat-header-row *matHeaderRowDef="columns ; sticky: true"></tr>
        <tr mat-row *matRowDef="let row; columns: columns;"></tr>
    </table>
  </div>
</div>

<div class="loadWrapper" *ngIf="isloading">
    <mat-spinner></mat-spinner>
</div>
    
  